import{r as h,j as e,L as B,S as L}from"./app-DKWWGPkh.js";import{B as y}from"./button-C7Y5qsip.js";import{C as R}from"./checkbox-CBzjjcPT.js";import{u as E,F as G,a as d,b as i,c as l,d as p,e as u,P as O,f as U,g as J,C as V,h as $,i as z,j as H,k as W,l as q,m as P}from"./popover-8mr5IIld.js";import{I as x}from"./input-CIebaUxA.js";import{R as Q,a as k}from"./radio-group-Be5P47Yd.js";import{T as X}from"./textarea-DangYk5b.js";import{A as Y}from"./admin-layout-C6YqKfRO.js";import{c as S,r as Z,p as ee}from"./utils-Bvi-Pw0s.js";import{B as se,s as ae,o as re,a as oe,e as te,n as ne,c as ie,b as j}from"./types-Q8hJ2tnW.js";import le from"./course-modules-section-h2wpLkcc.js";import{C as me}from"./chevrons-up-down-k3rUxTzs.js";import{C as ce}from"./check-BZMnaMW7.js";import"./index-DJs6N27V.js";import"./index-DWK5kEmi.js";import"./index-DG-61H9u.js";import"./index-DPP3oJkb.js";import"./index-DMJuNojM.js";import"./index-D0x_N1Tp.js";import"./index-D374XHgT.js";import"./index-D4YDkQ-Y.js";import"./Combination-D5NuUan2.js";import"./floating-ui.react-dom-CUpBpmTS.js";import"./search-DMM3-CPe.js";import"./createLucideIcon-CHYVP_IS.js";import"./label-CD0LHiYo.js";import"./circle-DkcJcbW3.js";import"./sonner-BMsXMUpS.js";import"./index-CX9g9tSg.js";import"./breadcrumbs-b1p3mPog.js";import"./x-Cs-MBYkT.js";import"./tooltip-YyHjWF9N.js";import"./index-ALjdojli.js";import"./index-C7sUzjcQ.js";import"./dropdown-menu-D7it2NYV.js";import"./index-HU1vpvM9.js";import"./chevron-right-Cn5DrFg_.js";import"./users-D7P5pSnU.js";import"./presentation-EYAiFwBg.js";import"./badge-BM0Z-ed9.js";import"./dialog-D-2_ISnb.js";import"./separator-DqemTp4d.js";import"./create-lesson-BmHV_Mtx.js";import"./input-error-BDMQOfei.js";import"./select-Dah9E4UP.js";import"./chevron-down-5BnfJYxK.js";import"./chevron-up-6IzARIhY.js";import"./switch-SNcGEtm-.js";import"./Editor-DvCTJcq5.js";import"./create-module-BPlmR2Y6.js";import"./edit-lesson-1QVnX5hc.js";import"./edit-module-IJxxS35K.js";import"./plus-BO23QYUf.js";import"./square-pen-Ca-al8FS.js";import"./trash-99qJEZu1.js";import"./badge-check-CBgnyeL0.js";import"./lock-BaVn2Itf.js";const de=[{title:"Kelas Online",href:route("courses.index")},{title:"Tambah Kelas Baru",href:route("courses.create")}],pe=re({title:j().nonempty("Judul harus diisi"),category_id:j().nonempty("Kategori harus dipilih"),short_description:j().max(200).nullable(),description:j().max(1e3).nullable(),thumbnail:ie().nullable(),price:ne().min(0),level:te(["beginner","intermediate","advanced"]),tools:oe(j()).optional()});function js({categories:b,tools:w}){const[F,v]=h.useState(!1),[T,C]=h.useState(null),[I,D]=h.useState([]),[N,M]=h.useState([]),[f,_]=h.useState([]),m=E({resolver:ae(pe),defaultValues:{title:"",category_id:"",short_description:"",description:"",thumbnail:"",price:0,level:"beginner",tools:[]}});function K(s){const a=new FormData;Object.entries(s).forEach(([r,o])=>{r==="thumbnail"&&o?a.append("thumbnail",o):r==="tools"&&Array.isArray(o)?o.forEach(n=>a.append("tools[]",n)):r!=="thumbnail"&&r!=="sneak_peek_images"&&r!=="tools"&&a.append(r,o)}),I.forEach((r,o)=>{a.append(`sneak_peek_images[${o}]`,r)}),f.forEach((r,o)=>{var n;(n=r.lessons)==null||n.forEach((c,g)=>{c.type==="file"&&c.attachment instanceof File&&a.append(`modules[${o}][lessons][${g}][attachment]`,c.attachment)})});const t=f.map(r=>{var o;return{...r,lessons:(o=r.lessons)==null?void 0:o.map(n=>{const{...c}=n;return c})}});a.append("modules",JSON.stringify(t)),L.post(route("courses.store"),a,{forceFormData:!0})}const A=s=>{const a=Array.from(s.target.files??[]).slice(0,4);D(a);const t=a.map(r=>new Promise(o=>{const n=new FileReader;n.onload=c=>{var g;return o((g=c.target)==null?void 0:g.result)},n.readAsDataURL(r)}));Promise.all(t).then(M)};return e.jsxs(Y,{breadcrumbs:de,children:[e.jsx(B,{title:"Tambah Kelas Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Kelas Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk membuat kelas baru. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan kelas sebagai draft.'}),e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx(G,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(K),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Kelas"})]}),e.jsx(d,{control:m.control,name:"title",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Judul Kelas"}),e.jsx(p,{children:e.jsx(x,{placeholder:"Masukkan judul kelas",...s,autoComplete:"off"})}),e.jsx(u,{})]})}),e.jsx(d,{control:m.control,name:"category_id",render:({field:s})=>{var a;return e.jsxs(i,{className:"flex flex-col",children:[e.jsx(l,{children:"Kategori"}),e.jsxs(O,{open:F,onOpenChange:v,children:[e.jsx(U,{asChild:!0,children:e.jsx(p,{children:e.jsxs(y,{variant:"outline",role:"combobox",className:S("justify-between",!s.value&&"text-muted-foreground"),children:[s.value?(a=b.find(t=>t.id===s.value))==null?void 0:a.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(me,{className:"opacity-50"})]})})}),e.jsx(J,{className:"p-0",children:e.jsxs(V,{children:[e.jsx($,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(z,{children:[e.jsx(H,{children:"Tidak ada kategori ditemukan."}),e.jsx(W,{children:b.map(t=>e.jsxs(q,{value:t.name,onSelect:()=>{m.setValue("category_id",t.id),v(!1)},children:[t.name,e.jsx(ce,{className:S("ml-auto",t.id===s.value?"opacity-100":"opacity-0")})]},t.id))})]})]})})]}),e.jsx(u,{})]})}}),e.jsx(d,{control:m.control,name:"tools",render:()=>e.jsxs(i,{children:[e.jsx(l,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:"Pilih tools yang digunakan pada bootcamp ini."}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:w.map(s=>e.jsx(d,{control:m.control,name:"tools",render:({field:a})=>{var t;return e.jsxs(i,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(p,{children:e.jsx(R,{checked:(t=a.value)==null?void 0:t.includes(s.id),onCheckedChange:r=>{var o;r?a.onChange([...a.value??[],s.id]):a.onChange((o=a.value)==null?void 0:o.filter(n=>n!==s.id))}})}),e.jsx(l,{className:"text-sm font-normal",children:s.name})]})}},s.id))}),e.jsx(u,{})]})}),e.jsx(d,{control:m.control,name:"short_description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Deskripsi Singkat"}),e.jsx(p,{children:e.jsx(x,{placeholder:"Masukkan deskripsi singkat",...s,value:s.value??"",autoComplete:"off"})}),e.jsx(u,{})]})}),e.jsx(d,{control:m.control,name:"description",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(X,{...s,value:s.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(u,{})]})}),e.jsx(d,{control:m.control,name:"thumbnail",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:T||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(x,{type:"file",name:s.name,accept:"image/*",onChange:a=>{var r;const t=((r=a.target.files)==null?void 0:r[0])??null;if(s.onChange(t),t){const o=new FileReader;o.onload=n=>{var c;return C((c=n.target)==null?void 0:c.result)},o.readAsDataURL(t)}else C(null)}}),e.jsx(P,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(u,{})]})}),e.jsxs(i,{children:[e.jsx(l,{children:"Sneak Peek Kelas (Maksimal 4 gambar)"}),N.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:N.map((s,a)=>e.jsx("img",{src:s,alt:`Sneak Peek ${a+1}`,className:"h-24 w-24 rounded border object-cover"},a))}),e.jsx(x,{type:"file",accept:"image/*",multiple:!0,onChange:A,max:4}),e.jsx(P,{className:"ms-1",children:"Upload hingga 4 gambar. Format: PNG/JPG, max 2MB per gambar."})]}),e.jsx(d,{control:m.control,name:"price",render:({field:s})=>e.jsxs(i,{children:[e.jsx(l,{children:"Harga"}),e.jsx(x,{...s,type:"text",placeholder:"Masukkan harga kursus",value:Z.format(s.value||0),onChange:a=>s.onChange(ee(a.target.value)),autoComplete:"off"}),e.jsx(u,{})]})}),e.jsx(d,{control:m.control,name:"level",render:({field:s})=>e.jsxs(i,{className:"space-y-3",children:[e.jsx(l,{children:"Tingkat Kesulitan"}),e.jsx(p,{children:e.jsxs(Q,{onValueChange:s.onChange,defaultValue:s.value,className:"flex flex-col",children:[e.jsxs(i,{className:"flex items-center gap-3",children:[e.jsx(p,{children:e.jsx(k,{value:"beginner"})}),e.jsx(l,{className:"font-normal",children:"Beginner"})]}),e.jsxs(i,{className:"flex items-center gap-3",children:[e.jsx(p,{children:e.jsx(k,{value:"intermediate"})}),e.jsx(l,{className:"font-normal",children:"Intermediate"})]}),e.jsxs(i,{className:"flex items-center gap-3",children:[e.jsx(p,{children:e.jsx(k,{value:"advanced"})}),e.jsx(l,{className:"font-normal",children:"Advanced"})]})]})}),e.jsx(u,{})]})})]}),e.jsx(y,{type:"submit",className:"w-full hover:cursor-pointer",children:"Simpan Draft"})]})}),e.jsx(le,{modules:f,setModules:_,lessons:[],setLessons:()=>{}})]})]})]})}export{js as default};
