import{r as u,j as e,L as te,S as re}from"./app-ehuvTaMD.js";import{B as g}from"./button-CnWCZhaS.js";import{C as se,b as C}from"./calendar-CgFKGgHD.js";import{C as ne}from"./checkbox-B8XK7e9W.js";import{u as oe,F as ie,a as o,b as i,c as l,d as x,e as c,P as j,f,g as v,C as le,h as ce,i as de,j as me,k as he,l as ue,m as k}from"./popover-DpaRabne.js";import{I as p}from"./input-CuISp_4v.js";import{L as pe}from"./label-jDXTnFJn.js";import{S as xe,E as S}from"./Editor-Cm_uS7aO.js";import{T as N}from"./textarea-DAo4xcY7.js";import{A as ge}from"./admin-layout-CU0u7Iu5.js";import{c as R,r as U,p as H}from"./utils-9G-TgTw2.js";import{B as je,s as fe,o as ve,a as ke,n as b,b as d,c as be}from"./types-86CryD60.js";import{t as ye}from"./index-DcEiB8JP.js";import Ce from"./schedule-input-BNuZWIc0.js";import{C as Se}from"./chevrons-up-down-DFFn7lFK.js";import{C as Ne}from"./check-Vx_kM3Sv.js";import{C as _}from"./chevron-down-DIUNEqXK.js";import"./index-RAtLVda3.js";import"./createLucideIcon-Dwz8hL6d.js";import"./format-Bp4OdCl_.js";import"./chevron-left-B3D0gR2W.js";import"./chevron-right-CgmHLjvL.js";import"./index-BkyRFM7S.js";import"./index-CpxHlOzM.js";import"./index-DHDduoin.js";import"./floating-ui.react-dom-CMsEK_Tl.js";import"./index-BKDR33wU.js";import"./index-DyLQgsT1.js";import"./index-D4fESLtC.js";import"./Combination-CM1ERkG0.js";import"./search-C8ZFY701.js";import"./sonner-Balhh_Kz.js";import"./breadcrumbs-C5opYLAT.js";import"./tooltip-ChlZffu4.js";import"./index-Bny227ZW.js";import"./dropdown-menu--aYbk_9c.js";import"./index-Dh3ObG17.js";import"./circle-_xmX6mmF.js";import"./user-CvN31xww.js";import"./app-sidebar-header-B_xZZhxf.js";import"./user-check-JnG19HdY.js";import"./users-Bpbqw-Ov.js";import"./monitor-play-D_TECI6F.js";import"./presentation-DqaIbKSH.js";import"./dollar-sign-BFrG7T-S.js";import"./plus-CVMLYMea.js";const _e=ve({title:d().nonempty("Judul harus diisi"),category_id:d().nonempty("Kategori harus dipilih"),description:d().nullable(),benefits:d().nullable(),requirements:d().nullable(),curriculum:d().nullable(),thumbnail:be().nullable(),start_date:d(),end_date:d(),registration_deadline:d(),host_name:d().nullable(),host_description:d().nullable(),strikethrough_price:b().min(0),price:b().min(0),quota:b().min(0),group_url:d().nullable(),batch:b().min(0),tools:ke(d()).optional()}).refine(r=>r.strikethrough_price>0?r.strikethrough_price>r.price:!0,{message:"Harga coret harus lebih besar dari harga normal.",path:["strikethrough_price"]});function va({bootcamp:r,categories:w,tools:G}){var B,L,O,z,A;const[Y,D]=u.useState(!1),[J,F]=u.useState(!1),[V,P]=u.useState(!1),[W,E]=u.useState(!1),[I,Q]=u.useState(r.strikethrough_price>0),[M,T]=u.useState(null),[X,$]=u.useState(!1),Z=[{title:"Bootcamp",href:route("bootcamps.index")},{title:r.title,href:route("bootcamps.show",{bootcamp:r.id})},{title:"Edit Bootcamp",href:route("bootcamps.edit",{bootcamp:r.id})}],n=oe({resolver:fe(_e),defaultValues:{title:r.title??"",category_id:r.category_id??"",description:r.description??"",benefits:r.benefits??"",requirements:r.requirements??"",curriculum:r.curriculum??"",thumbnail:"",start_date:typeof r.start_date=="string"?r.start_date:((B=r.start_date)==null?void 0:B.toISOString())??"",end_date:typeof r.end_date=="string"?r.end_date:((L=r.end_date)==null?void 0:L.toISOString())??"",registration_deadline:typeof r.registration_deadline=="string"?r.registration_deadline:((O=r.registration_deadline)==null?void 0:O.toISOString())??"",host_name:r.host_name??"",host_description:r.host_description??"",strikethrough_price:r.strikethrough_price??0,price:r.price??0,quota:r.quota??0,group_url:r.group_url??"",batch:r.batch??1,tools:((z=r.tools)==null?void 0:z.map(a=>a.id))??[]}}),[q,ee]=u.useState(((A=r.schedules)==null?void 0:A.map(a=>({day:a.day,start_time:a.start_time,end_time:a.end_time})))??[]);function ae(a){re.post(route("bootcamps.update",{bootcamp:r.id}),{...a,schedules:q,_method:"PUT"},{forceFormData:!0})}return e.jsxs(ge,{breadcrumbs:Z,children:[e.jsx(te,{title:`Edit Bootcamp - ${r.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit Bootcamp ",r.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk mengedit bootcamp. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan perubahan sebagai draft.'}),e.jsx(ie,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(ae),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Bootcamp"})]}),e.jsx(o,{control:n.control,name:"title",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(l,{children:["Judul Bootcamp ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{children:e.jsx(p,{placeholder:"Masukkan judul bootcamp",...a,autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"category_id",render:({field:a})=>{var t;return e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(l,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(j,{open:Y,onOpenChange:D,children:[e.jsx(f,{asChild:!0,children:e.jsx(x,{children:e.jsxs(g,{variant:"outline",role:"combobox",className:R("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=w.find(s=>s.id===a.value))==null?void 0:t.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(Se,{className:"opacity-50"})]})})}),e.jsx(v,{className:"p-0",children:e.jsxs(le,{children:[e.jsx(ce,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(de,{children:[e.jsx(me,{children:"Tidak ada kategori ditemukan."}),e.jsx(he,{children:w.map(s=>e.jsxs(ue,{value:s.name,onSelect:()=>{n.setValue("category_id",s.id),D(!1)},children:[s.name,e.jsx(Ne,{className:R("ml-auto",s.id===a.value?"opacity-100":"opacity-0")})]},s.id))})]})]})})]}),e.jsx(c,{})]})}}),e.jsx(o,{control:n.control,name:"tools",render:()=>e.jsxs(i,{children:[e.jsx(l,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:G.map(a=>e.jsx(o,{control:n.control,name:"tools",render:({field:t})=>{var s;return e.jsxs(i,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(x,{children:e.jsx(ne,{checked:(s=t.value)==null?void 0:s.includes(a.id),onCheckedChange:h=>{var m;h?t.onChange([...t.value??[],a.id]):t.onChange((m=t.value)==null?void 0:m.filter(y=>y!==a.id))}})}),e.jsx(l,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"description",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Deskripsi Lengkap"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"thumbnail",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:M||(r.thumbnail?`/storage/${r.thumbnail}`:"/assets/images/placeholder.png"),alt:r.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(p,{type:"file",name:a.name,accept:"image/*",className:X?"border-red-500 focus-visible:ring-red-500":"",onChange:t=>{var h;const s=((h=t.target.files)==null?void 0:h[0])??null;if(s&&s.size>2*1024*1024){$(!0),ye("Ukuran file maksimal 2MB!");return}if($(!1),a.onChange(s),s){const m=new FileReader;m.onload=y=>{var K;return T((K=y.target)==null?void 0:K.result)},m.readAsDataURL(s)}else T(null)}}),e.jsx(k,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(c,{})]})}),e.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xe,{id:"show-strikethrough",checked:I,onCheckedChange:a=>{Q(a),a||n.setValue("strikethrough_price",0)}}),e.jsx(pe,{htmlFor:"show-strikethrough",children:"Aktifkan Harga Coret (Opsional)"})]}),I&&e.jsx(o,{control:n.control,name:"strikethrough_price",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Harga Coret"}),e.jsx(p,{...a,type:"text",placeholder:"Rp 0",value:U.format(a.value||0),onChange:t=>a.onChange(H(t.target.value)),autoComplete:"off"}),e.jsx(k,{children:"Harga asli yang akan ditampilkan tercoret."}),e.jsx(c,{})]})})]}),e.jsx(o,{control:n.control,name:"price",render:({field:a})=>e.jsxs(i,{children:[e.jsxs(l,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{...a,type:"text",placeholder:"Masukkan harga bootcamp",value:U.format(a.value||0),onChange:t=>a.onChange(H(t.target.value)),autoComplete:"off"}),e.jsx(k,{className:"ms-1",children:"Isi 0 untuk harga bootcamp gratis"}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"batch",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Batch"}),e.jsx(x,{children:e.jsx(p,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan batch",autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"quota",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Kuota Peserta"}),e.jsx(x,{children:e.jsx(p,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan kuota peserta",autoComplete:"off"})}),e.jsx(k,{className:"ms-1",children:"Isi 0 untuk kuota tak terbatas"}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"curriculum",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Kurikum"}),e.jsx(S,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"group_url",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Link Group Peserta"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan link grup peserta",autoComplete:"off"}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:16}),e.jsx("h3",{className:"font-medium",children:"Tanggal dan Informasi Pemateri"})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row",children:[e.jsx(o,{control:n.control,name:"start_date",render:({field:a})=>e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(l,{children:["Waktu Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(j,{open:J,onOpenChange:F,children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(s),F(!1)}})})]})})}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"end_date",render:({field:a})=>e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(l,{children:["Waktu Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(j,{open:V,onOpenChange:P,children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(s),P(!1)}})})]})})}),e.jsx(c,{})]})})]}),e.jsx(Ce,{value:q,onChange:ee}),e.jsx(o,{control:n.control,name:"registration_deadline",render:({field:a})=>e.jsxs(i,{className:"flex flex-col",children:[e.jsxs(l,{children:["Deadline Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(j,{open:W,onOpenChange:E,children:[e.jsx(f,{asChild:!0,children:e.jsxs(g,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(_,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const h=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],m=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(m&&h?`${m}T${h}`:""),E(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(p,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const s=a.value?new Date(a.value):new Date,h=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,m=t.target.value||"00:00";a.onChange(`${h}T${m}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"host_name",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Nama Pemateri"}),e.jsx(x,{children:e.jsx(p,{placeholder:"Masukkan nama pemateri",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"host_description",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Deskripsi Pemateri"}),e.jsx(N,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi pemateri",autoComplete:"off"}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"requirements",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Syarat Peserta"}),e.jsx(S,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(c,{})]})}),e.jsx(o,{control:n.control,name:"benefits",render:({field:a})=>e.jsxs(i,{children:[e.jsx(l,{children:"Benefit Mengikuti Bootcamp"}),e.jsx(S,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(c,{})]})})]}),e.jsx(g,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Perubahan"})]})})]})]})}export{va as default};
