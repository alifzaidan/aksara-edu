import{r as u,m as w,j as e}from"./app-Dq6gQsdJ.js";import{I as _}from"./input-error-0yqamfI6.js";import{B as c}from"./button-DQNQt15p.js";import{b as D,c as O,d as B,e as F,f as P}from"./dialog-BHFLk6Ss.js";import{I as k}from"./input-C7phU1tV.js";import{L as n}from"./label-JdZ0mrbc.js";import{R as g,a as x}from"./radio-group-CdxWPIhu.js";import{S as E,a as R,b as V,c as z,e as v}from"./select-BSW80QwE.js";import{T as G}from"./textarea-BqHwIh1i.js";import{T as $}from"./trash-CiYC3Nyh.js";import"./utils-DDsyvClK.js";import"./index-Dib582-y.js";import"./index-C-x0tS9E.js";import"./createLucideIcon-_HNCqxDG.js";import"./index-IOeESwHC.js";import"./Combination-CW-n7ZPv.js";import"./circle-QXWMVkCJ.js";import"./index-BZSgWpH3.js";import"./index-CGyTD2Zq.js";import"./index-Bc0fBnGk.js";import"./index-DxmPFaDj.js";import"./index-C1Qf9IHN.js";import"./floating-ui.react-dom-CH7_FJrW.js";import"./index-inoU2FaE.js";import"./index-BFSLKhao.js";import"./chevron-down-BotFShqS.js";import"./check-CDdq_EP1.js";import"./chevron-up-Z0O3rZLs.js";function fe({setOpen:h,quizId:b}){const d=u.useRef(null),[r,f]=u.useState([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}]),[p,y]=u.useState("multiple_choice"),{data:S,setData:m,post:C,processing:N,reset:T,errors:j,clearErrors:q}=w({question_text:"",type:"multiple_choice",quiz_id:b,options:r}),o=t=>{f(t),m("options",t)},I=t=>{t.preventDefault(),C(route("questions.store"),{preserveScroll:!0,onSuccess:()=>{h(!1),T(),q(),f([{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},onError:()=>{var s;return(s=d.current)==null?void 0:s.focus()}})};return e.jsxs(D,{children:[e.jsx(O,{children:"Tambah Pertanyaan"}),e.jsx(B,{children:"Masukkan pertanyaan dan opsi jawaban."}),e.jsxs("form",{className:"space-y-4",onSubmit:I,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"question_text",children:"Pertanyaan"}),e.jsx(G,{id:"question_text",name:"question_text",ref:d,value:S.question_text,onChange:t=>m("question_text",t.target.value),placeholder:"Tulis pertanyaan...",autoComplete:"off",required:!0}),e.jsx(_,{message:j.question_text}),e.jsx(n,{htmlFor:"type",className:"mt-2",children:"Tipe Pertanyaan"}),e.jsxs(E,{value:p,onValueChange:t=>{const s=t;y(s),m("type",s),o(s==="true_false"?[{option_text:"Benar",is_correct:!1},{option_text:"Salah",is_correct:!1}]:[{option_text:"",is_correct:!1},{option_text:"",is_correct:!1}])},children:[e.jsx(R,{className:"w-full",children:e.jsx(V,{placeholder:"Pilih tipe pertanyaan"})}),e.jsxs(z,{children:[e.jsx(v,{value:"multiple_choice",children:"Pilihan Ganda"}),e.jsx(v,{value:"true_false",children:"Benar/Salah"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Opsi Jawaban"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[p==="true_false"?e.jsxs(g,{value:r.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const s=Number(t),a=r.map((i,l)=>({...i,is_correct:l===s}));o(a)},children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(x,{value:"0",id:"option-0"}),e.jsx(n,{htmlFor:"option-0",children:"Benar"})]}),e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(x,{value:"1",id:"option-1"}),e.jsx(n,{htmlFor:"option-1",children:"Salah"})]})]}):e.jsx(g,{value:r.findIndex(t=>t.is_correct).toString(),onValueChange:t=>{const s=Number(t),a=r.map((i,l)=>({...i,is_correct:l===s}));o(a)},children:r.map((t,s)=>e.jsxs("div",{className:"mb-1 flex items-center space-x-2",children:[e.jsx(k,{type:"text",value:t.option_text,onChange:a=>{const i=[...r];i[s].option_text=a.target.value,o(i)},placeholder:`Opsi ${String.fromCharCode(65+s)}`,required:!0,className:t.is_correct?"border-green-500 ring-2 ring-green-500":""}),e.jsx(x,{value:s.toString(),id:`option-${s}`}),e.jsx(n,{htmlFor:`option-${s}`,className:"hover:cursor-pointer",children:"Benar"}),r.length>2&&e.jsx(c,{type:"button",variant:"destructive",size:"sm",onClick:()=>{const a=r.filter((i,l)=>l!==s);o(a)},className:"hover:cursor-pointer",children:e.jsx($,{})})]},s))}),p==="multiple_choice"&&e.jsx(c,{type:"button",size:"sm",className:"hover:cursor-pointer",onClick:()=>o([...r,{option_text:"",is_correct:!1}]),children:"+ Tambah Opsi"})]}),e.jsx(_,{message:j.options})]}),e.jsxs(F,{className:"gap-2",children:[e.jsx(P,{asChild:!0,children:e.jsx(c,{variant:"secondary",onClick:()=>h(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(c,{disabled:N,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Tambah Pertanyaan"})})]})]})]})}export{fe as default};
