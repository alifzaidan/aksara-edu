import{r as u,j as e,L as y}from"./app-DiJOpchw.js";import{B as d}from"./button-5OFXcais.js";import{C as b}from"./checkbox-DreoO2GC.js";import{I as N}from"./input-BjYmRNk6.js";import{L as k}from"./label-NIjZyLYO.js";import{S}from"./separator-BkYnw_mh.js";import{T as w,a as T,b as v,c as C}from"./tabs-B-6pjRsh.js";import{U as L}from"./user-layout-BrzCohqa.js";import{B as f}from"./badge-check-9wRS-MJN.js";import{H as A}from"./hourglass-DXP0iR_u.js";import"./index-CIK7fpQ2.js";import"./utils-C8MUq-y1.js";import"./index-Bc783D3z.js";import"./index-BPu_V-K-.js";import"./index-izb7qtpW.js";import"./index-D5mdLAAu.js";import"./index-DhzV2jKz.js";import"./index-Bn3MLi6D.js";import"./check-ssoc2dou.js";import"./createLucideIcon-DKDFERHj.js";import"./sonner-BoU-t8II.js";import"./index-CNE6fjJR.js";import"./breadcrumbs-CJvtZdJf.js";import"./index-3doH0Yt9.js";import"./Combination-Baw02jyl.js";import"./tooltip-DsYhlSPs.js";import"./index-rWur4EJ2.js";import"./floating-ui.react-dom-yHXoPCar.js";import"./index-CgIaq9Ii.js";import"./dropdown-menu-CuYDeOZn.js";import"./index-BSloASfz.js";import"./circle-CD8vtyIM.js";import"./user-MuUbZGtR.js";import"./chevron-right-Ctoky5F0.js";import"./search-D9IQ70wZ.js";function D(a){if(!a)return[];const l=a.match(/<li>(.*?)<\/li>/g);return l?l.map(i=>i.replace(/<\/?li>/g,"").trim()):[]}function xe({webinar:a,hasAccess:l,pendingInvoiceUrl:i}){const[c,h]=u.useState(!1),[x,o]=u.useState(!1),j=D(a.benefits),t=a.price===0,g=async r=>{var n,p;if(r.preventDefault(),!c&&!t){alert("Anda harus menyetujui syarat dan ketentuan!");return}if(o(!0),t){try{const m=await fetch(route("enroll.free"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.content)||""},body:JSON.stringify({type:"webinar",id:a.id})}),s=await m.json();m.ok&&s.redirect_url?window.location.href=s.redirect_url:alert(s.message||"Gagal mendaftar kelas gratis.")}catch{alert("Terjadi kesalahan saat proses pendaftaran.")}finally{o(!1)}return}try{const s=await(await fetch(route("invoice.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.content)||""},credentials:"same-origin",body:JSON.stringify({type:"webinar",id:a.id})})).json();s.url?window.location.href=s.url:alert("Gagal membuat invoice.")}catch{alert("Terjadi kesalahan saat proses pembayaran.")}finally{o(!1)}};return e.jsxs(L,{children:[e.jsx(y,{title:"Daftar Webinar"}),e.jsx("section",{className:"to-primary w-full bg-gradient-to-tl from-black px-4",children:e.jsxs("div",{className:"mx-auto my-12 w-full max-w-7xl px-4",children:[e.jsxs("h2",{className:"mx-auto mb-4 max-w-3xl bg-gradient-to-r from-[#71D0F7] via-white to-[#E6834A] bg-clip-text text-center text-3xl font-bold text-transparent italic sm:text-4xl",children:['Daftar Webinar "',a.title,'"']}),e.jsx("p",{className:"text-center text-gray-400",children:"Silakan selesaikan pembayaran untuk mendaftar webinar."})]})}),e.jsx("section",{className:"mx-auto my-4 w-full max-w-7xl px-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-6",children:[e.jsxs(w,{defaultValue:"detail",className:"lg:col-span-2",children:[e.jsx(T,{children:e.jsx(v,{value:"detail",children:"Detail Webinar"})}),e.jsx(C,{value:"detail",children:e.jsxs("div",{className:"h-full rounded-lg border p-4",children:[e.jsx("h2",{className:"text-3xl font-bold italic",children:"Yang akan kamu dapatkan"}),e.jsx("p",{className:"mt-2 mb-4 text-sm text-gray-600",children:"Manfaat yang akan kamu peroleh setelah mengikuti webinar ini."}),e.jsx("ul",{className:"space-y-2",children:j.map((r,n)=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(f,{size:"18",className:"text-green-600"}),e.jsx("p",{children:r})]},n))})]})})]}),l?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(f,{size:64,className:"text-green-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Anda Sudah Memiliki Akses"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda sudah terdaftar di webinar ini. Silakan masuk ke dalam grup."}),e.jsx(d,{asChild:!0,className:"w-full",children:e.jsx("a",{href:a.group_url??"",target:"_blank",rel:"noopener noreferrer",children:"Masuk Group Webinar"})})]}):i?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center space-y-4 rounded-lg border p-6 text-center",children:[e.jsx(A,{size:64,className:"text-yellow-500"}),e.jsx("h2",{className:"text-xl font-bold",children:"Pembayaran Tertunda"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Anda memiliki pembayaran yang belum selesai untuk kelas ini. Silakan lanjutkan untuk membayar."}),e.jsx(d,{asChild:!0,className:"w-full",children:e.jsx("a",{href:i,children:"Lanjutkan Pembayaran"})})]}):e.jsxs("form",{onSubmit:g,children:[e.jsx("h2",{className:"my-2 text-xl font-bold italic",children:"Detail Pembayaran"}),e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[t?e.jsx("div",{className:"flex items-center justify-between p-4 text-center",children:e.jsx("span",{className:"w-full text-2xl font-bold text-green-600",children:"KELAS GRATIS"})}):e.jsxs(e.Fragment,{children:[e.jsx(N,{type:"text",placeholder:"Masukkan Kode Promo (Opsional)",className:"w-full"}),e.jsxs("div",{className:"space-y-2 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Kelas"}),e.jsxs("span",{className:"font-semibold text-gray-500",children:["Rp ",a.price.toLocaleString("id-ID")]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pajak"}),e.jsx("span",{className:"font-semibold text-gray-500",children:"Rp 0"})]}),e.jsx(S,{className:"my-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Harga Total"}),e.jsxs("span",{className:"text-xl font-bold",children:["Rp ",a.price.toLocaleString("id-ID")]})]})]})]}),!t&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{id:"terms",checked:c,onCheckedChange:r=>h(r===!0)}),e.jsx(k,{htmlFor:"terms",children:"Saya menyetujui syarat dan ketentuan"})]}),e.jsx(d,{className:"w-full",type:"submit",disabled:(t?!1:!c)||x,children:x?"Memproses...":t?"Dapatkan Akses Gratis Sekarang":"Bayar Sekarang"})]})]})]})})]})}export{xe as default};
