import{r as u,j as e,L as W,S as H}from"./app-CcFdSx3p.js";import{B as j}from"./button-CIbvkodZ.js";import{C as Q,b as C}from"./calendar-DcYLvhHs.js";import{C as X}from"./checkbox-BLI55CJ-.js";import{u as Z,F as ee,a as o,b as l,c as i,d as x,e as d,P as g,f,g as v,C as ae,h as te,i as se,j as ne,k as re,l as oe,m as y}from"./popover-DSi0SVJt.js";import{I as h}from"./input-Bm-IYZcD.js";import{T as b}from"./textarea-DBsIOu6_.js";import{A as le}from"./admin-layout-CZtm9c7O.js";import{c as R,r as ie,p as de}from"./utils-DnqkK6dB.js";import{B as ce,s as me,o as pe,a as he,n as N,b as c,c as ue}from"./types-Co0r4Otm.js";import{E as xe}from"./Editor-83eDp5aR.js";import je from"./schedule-input-BddMz2Tz.js";import{C as ge}from"./chevrons-up-down-DBJz_egd.js";import{C as fe}from"./check-yEV-KXIp.js";import{C as S}from"./chevron-down-Z3Ju1IOh.js";import"./index-BCV_VuQh.js";import"./createLucideIcon-Cxoi2kG9.js";import"./format-Bp4OdCl_.js";import"./chevron-left-BQyrXZ3P.js";import"./chevron-right-CXRDSbzO.js";import"./index-Dr-ftvLf.js";import"./index-CUjcBijk.js";import"./index-p7pDA3hm.js";import"./index-BqMytPCp.js";import"./index-aGOqO_Dt.js";import"./index-MPwWGEHa.js";import"./index-Ddz3xCLp.js";import"./Combination-D2dCiedz.js";import"./floating-ui.react-dom-Cx4jsgtI.js";import"./search-CyZiyDpX.js";import"./label-B7TSvCco.js";import"./sonner-CpION8Bq.js";import"./index-6Fi-EoRF.js";import"./breadcrumbs-iTKossir.js";import"./tooltip-CDLpTR9P.js";import"./index-DXls8flm.js";import"./index-BJsO2xFe.js";import"./dropdown-menu-BzEWvRAJ.js";import"./index-CB0H5QzK.js";import"./circle-CZQKF9m3.js";import"./user-Bma3TdMw.js";import"./users-BO0iIsON.js";import"./monitor-play-DIHZLzj-.js";import"./presentation-ZGzCfCfF.js";import"./plus-KbEPC796.js";const ve=pe({title:c().nonempty("Judul harus diisi"),category_id:c().nonempty("Kategori harus dipilih"),description:c().nullable(),benefits:c().nullable(),thumbnail:ue().nullable(),start_date:c(),end_date:c(),registration_deadline:c(),host_name:c().nullable(),host_description:c().nullable(),price:N().min(0),quota:N().min(0),instructions:c().nullable(),batch:N().min(0),tools:he(c()).optional()});function ma({bootcamp:s,categories:w,tools:U}){var T,B,E,L,O;const[z,_]=u.useState(!1),[A,D]=u.useState(!1),[K,I]=u.useState(!1),[Y,F]=u.useState(!1),[P,M]=u.useState(null),G=[{title:"Bootcamp",href:route("bootcamps.index")},{title:s.title,href:route("bootcamps.show",{bootcamp:s.id})},{title:"Edit Bootcamp",href:route("bootcamps.edit",{bootcamp:s.id})}],r=Z({resolver:me(ve),defaultValues:{title:s.title??"",category_id:s.category_id??"",description:s.description??"",benefits:s.benefits??"",thumbnail:"",start_date:typeof s.start_date=="string"?s.start_date:((T=s.start_date)==null?void 0:T.toISOString())??"",end_date:typeof s.end_date=="string"?s.end_date:((B=s.end_date)==null?void 0:B.toISOString())??"",registration_deadline:typeof s.registration_deadline=="string"?s.registration_deadline:((E=s.registration_deadline)==null?void 0:E.toISOString())??"",host_name:s.host_name??"",host_description:s.host_description??"",price:s.price??0,quota:s.quota??0,instructions:s.instructions??"",batch:s.batch??1,tools:((L=s.tools)==null?void 0:L.map(a=>a.id))??[]}}),[$,J]=u.useState(((O=s.schedules)==null?void 0:O.map(a=>({day:a.day,start_time:a.start_time,end_time:a.end_time})))??[]);function V(a){H.post(route("bootcamps.update",{bootcamp:s.id}),{...a,schedules:$,_method:"PUT"},{forceFormData:!0})}return e.jsxs(le,{breadcrumbs:G,children:[e.jsx(W,{title:`Edit Bootcamp - ${s.title}`}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:["Edit Bootcamp ",s.title]}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk mengedit bootcamp. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan perubahan sebagai draft.'}),e.jsx(ee,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(V),className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Bootcamp"})]}),e.jsx(o,{control:r.control,name:"title",render:({field:a})=>e.jsxs(l,{children:[e.jsxs(i,{children:["Judul Bootcamp ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(x,{children:e.jsx(h,{placeholder:"Masukkan judul bootcamp",...a,autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"category_id",render:({field:a})=>{var t;return e.jsxs(l,{className:"flex flex-col",children:[e.jsxs(i,{children:["Kategori ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(g,{open:z,onOpenChange:_,children:[e.jsx(f,{asChild:!0,children:e.jsx(x,{children:e.jsxs(j,{variant:"outline",role:"combobox",className:R("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(t=w.find(n=>n.id===a.value))==null?void 0:t.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(ge,{className:"opacity-50"})]})})}),e.jsx(v,{className:"p-0",children:e.jsxs(ae,{children:[e.jsx(te,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(se,{children:[e.jsx(ne,{children:"Tidak ada kategori ditemukan."}),e.jsx(re,{children:w.map(n=>e.jsxs(oe,{value:n.name,onSelect:()=>{r.setValue("category_id",n.id),_(!1)},children:[n.name,e.jsx(fe,{className:R("ml-auto",n.id===a.value?"opacity-100":"opacity-0")})]},n.id))})]})]})})]}),e.jsx(d,{})]})}}),e.jsx(o,{control:r.control,name:"tools",render:()=>e.jsxs(l,{children:[e.jsx(i,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:U.map(a=>e.jsx(o,{control:r.control,name:"tools",render:({field:t})=>{var n;return e.jsxs(l,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(x,{children:e.jsx(X,{checked:(n=t.value)==null?void 0:n.includes(a.id),onCheckedChange:p=>{var m;p?t.onChange([...t.value??[],a.id]):t.onChange((m=t.value)==null?void 0:m.filter(k=>k!==a.id))}})}),e.jsx(i,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"description",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Deskripsi Lengkap"}),e.jsx(b,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"thumbnail",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:P||(s.thumbnail?`/storage/${s.thumbnail}`:"/assets/images/placeholder.png"),alt:s.title,className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(h,{type:"file",name:a.name,accept:"image/*",onChange:t=>{var p;const n=((p=t.target.files)==null?void 0:p[0])??null;if(a.onChange(n),n){const m=new FileReader;m.onload=k=>{var q;return M((q=k.target)==null?void 0:q.result)},m.readAsDataURL(n)}else M(null)}}),e.jsx(y,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"price",render:({field:a})=>e.jsxs(l,{children:[e.jsxs(i,{children:["Harga ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(h,{...a,type:"text",placeholder:"Masukkan harga bootcamp",value:ie.format(a.value||0),onChange:t=>a.onChange(de(t.target.value)),autoComplete:"off"}),e.jsx(y,{className:"ms-1",children:"Isi 0 untuk harga bootcamp gratis"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"batch",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Batch"}),e.jsx(x,{children:e.jsx(h,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan batch",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"quota",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Kuota Peserta"}),e.jsx(x,{children:e.jsx(h,{type:"number",...a,onChange:t=>a.onChange(parseInt(t.target.value,10)),placeholder:"Masukkan kuota peserta",autoComplete:"off"})}),e.jsx(y,{className:"ms-1",children:"Isi 0 untuk kuota tak terbatas"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"instructions",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Instruksi Peserta"}),e.jsx(b,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan instruksi setelah peserta mendaftar",autoComplete:"off"}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{size:16}),e.jsx("h3",{className:"font-medium",children:"Tanggal dan Informasi Pemateri"})]}),e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row",children:[e.jsx(o,{control:r.control,name:"start_date",render:({field:a})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsxs(i,{children:["Waktu Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(g,{open:A,onOpenChange:D,children:[e.jsx(f,{asChild:!0,children:e.jsxs(j,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(S,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(n),D(!1)}})})]})})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"end_date",render:({field:a})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsxs(i,{children:["Waktu Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(g,{open:K,onOpenChange:I,children:[e.jsx(f,{asChild:!0,children:e.jsxs(j,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(S,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{if(!t)return;const n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;a.onChange(n),I(!1)}})})]})})}),e.jsx(d,{})]})})]}),e.jsx(je,{value:$,onChange:J}),e.jsx(o,{control:r.control,name:"registration_deadline",render:({field:a})=>e.jsxs(l,{className:"flex flex-col",children:[e.jsxs(i,{children:["Deadline Pendaftaran ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex flex-col gap-3",children:e.jsxs(g,{open:Y,onOpenChange:F,children:[e.jsx(f,{asChild:!0,children:e.jsxs(j,{variant:"outline",id:"date",className:"w-32 justify-between font-normal",type:"button",children:[a.value?new Date(a.value).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"Pilih tanggal",e.jsx(S,{})]})}),e.jsx(v,{className:"w-auto overflow-hidden p-0",align:"start",children:e.jsx(C,{mode:"single",selected:a.value?new Date(a.value):void 0,captionLayout:"dropdown",onSelect:t=>{const p=(a.value?new Date(a.value):new Date).toTimeString().split(" ")[0],m=t?`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`:"";a.onChange(m&&p?`${m}T${p}`:""),F(!1)}})})]})}),e.jsx("div",{className:"flex flex-col gap-3",children:e.jsx(h,{type:"time",id:"time",step:"60",value:a.value?new Date(a.value).toTimeString().slice(0,5):"10:30",onChange:t=>{const n=a.value?new Date(a.value):new Date,p=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,m=t.target.value||"00:00";a.onChange(`${p}T${m}:00`)},className:"bg-background appearance-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-calendar-picker-indicator]:appearance-none"})})]}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"host_name",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Nama Pemateri"}),e.jsx(x,{children:e.jsx(h,{placeholder:"Masukkan nama pemateri",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"host_description",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Deskripsi Pemateri"}),e.jsx(b,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi pemateri",autoComplete:"off"}),e.jsx(d,{})]})}),e.jsx(o,{control:r.control,name:"benefits",render:({field:a})=>e.jsxs(l,{children:[e.jsx(i,{children:"Benefit Mengikuti Bootcamp"}),e.jsx(xe,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:t=>a.onChange(t),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(d,{})]})})]}),e.jsx(j,{type:"submit",className:"hover:cursor-pointer",children:"Simpan Perubahan"})]})})]})]})}export{ma as default};
