import{r as h,j as e,L as z,S as O}from"./app-DiJOpchw.js";import{B as S}from"./button-5OFXcais.js";import{C as J}from"./checkbox-DreoO2GC.js";import{u as V,F as $,a as d,b as n,c as i,d as u,e as p,P as q,f as H,g as W,C as Q,h as X,i as Y,j as Z,k as ee,l as ae,m as w}from"./popover-C-LZTX79.js";import{I as j}from"./input-BjYmRNk6.js";import{R as se,a as k}from"./radio-group-Cbt7ihen.js";import{T as re}from"./textarea-DZcYz1Sd.js";import{A as oe}from"./admin-layout-BrlcPaRO.js";import{c as F,r as te,p as ne}from"./utils-C8MUq-y1.js";import{B as ie,s as le,o as me,a as ce,e as de,n as pe,c as ue,b as x}from"./types-k4hQqmDF.js";import{E as he}from"./Editor-Djt8wBdk.js";import{t as T}from"./index-CNE6fjJR.js";import xe from"./course-modules-section-ClA77j7C.js";import{C as je}from"./chevrons-up-down-5CK6_B3y.js";import{C as ge}from"./check-ssoc2dou.js";import"./index-CIK7fpQ2.js";import"./index-Bc783D3z.js";import"./index-BPu_V-K-.js";import"./index-izb7qtpW.js";import"./index-D5mdLAAu.js";import"./index-DhzV2jKz.js";import"./index-Bn3MLi6D.js";import"./index-3doH0Yt9.js";import"./createLucideIcon-DKDFERHj.js";import"./Combination-Baw02jyl.js";import"./floating-ui.react-dom-yHXoPCar.js";import"./search-D9IQ70wZ.js";import"./label-NIjZyLYO.js";import"./circle-CD8vtyIM.js";import"./sonner-BoU-t8II.js";import"./breadcrumbs-CJvtZdJf.js";import"./tooltip-DsYhlSPs.js";import"./index-rWur4EJ2.js";import"./index-CgIaq9Ii.js";import"./dropdown-menu-CuYDeOZn.js";import"./index-BSloASfz.js";import"./user-MuUbZGtR.js";import"./chevron-right-Ctoky5F0.js";import"./user-check-CxolwCju.js";import"./users-iiJ1BNRq.js";import"./monitor-play-Cryr9eIl.js";import"./presentation-Dtu3K1iv.js";import"./dollar-sign-BLUpnHwP.js";import"./badge-BPXgBKRz.js";import"./dialog-ALjZHyKH.js";import"./separator-BkYnw_mh.js";import"./create-lesson-_3_WXd0C.js";import"./input-error-CNifSuy1.js";import"./select-CiN6JVdK.js";import"./chevron-down-BHENyxpF.js";import"./chevron-up-mkkwcXi8.js";import"./switch-ae6O2C2y.js";import"./create-module-aqD3T5f-.js";import"./edit-lesson-Cx2Wu5eE.js";import"./edit-module-DwJYSllo.js";import"./plus-DEjXb8IP.js";import"./square-pen-DpGi5-0S.js";import"./trash-CO-bIrsd.js";import"./badge-check-9wRS-MJN.js";import"./lock-16Vow3wR.js";const fe=[{title:"Kelas Online",href:route("courses.index")},{title:"Tambah Kelas Baru",href:route("courses.create")}],ke=me({title:x().nonempty("Judul harus diisi"),category_id:x().nonempty("Kategori harus dipilih"),short_description:x().max(200).nullable(),description:x().max(1e3).nullable(),key_points:x().max(1e3).nullable(),thumbnail:ue().nullable(),price:pe().min(0),level:de(["beginner","intermediate","advanced"]),tools:ce(x()).optional()});function Sa({categories:b,tools:E}){const[M,v]=h.useState(!1),[_,y]=h.useState(null),[I,D]=h.useState([]),[C,B]=h.useState([]),[K,N]=h.useState(!1),[A,L]=h.useState(!1),[g,R]=h.useState([]),l=V({resolver:le(ke),defaultValues:{title:"",category_id:"",short_description:"",description:"",key_points:`<ul>
                            <li>Mempelajari fitur-fitur untuk bikin web modern (Contoh)</li>
                            <li>Membuat dashboard, cms, dan restful api dengan filament (Contoh)</li>
                            <li>Memahami cara kerja hooks pada reactjs dan nextjs (Contoh)</li>
                        </ul>`,thumbnail:"",price:0,level:"beginner",tools:[]}});function U(a){const s=new FormData;Object.entries(a).forEach(([t,r])=>{t==="thumbnail"&&r?s.append("thumbnail",r):t==="tools"&&Array.isArray(r)?r.forEach(m=>s.append("tools[]",m)):t!=="thumbnail"&&t!=="sneak_peek_images"&&t!=="tools"&&s.append(t,r)}),I.forEach((t,r)=>{s.append(`sneak_peek_images[${r}]`,t)}),g.forEach((t,r)=>{var m;(m=t.lessons)==null||m.forEach((c,f)=>{c.type==="file"&&c.attachment instanceof File&&s.append(`modules[${r}][lessons][${f}][attachment]`,c.attachment)})});const o=g.map(t=>{var r;return{...t,lessons:(r=t.lessons)==null?void 0:r.map(m=>{const{...c}=m;return c})}});s.append("modules",JSON.stringify(o)),O.post(route("courses.store"),s,{forceFormData:!0})}const G=a=>{const s=Array.from(a.target.files??[]).slice(0,4),o=s.some(r=>r.size>2*1024*1024);if(L(o),o){T("Ukuran setiap gambar maksimal 2MB!");return}D(s);const t=s.map(r=>new Promise(m=>{const c=new FileReader;c.onload=f=>{var P;return m((P=f.target)==null?void 0:P.result)},c.readAsDataURL(r)}));Promise.all(t).then(B)};return e.jsxs(oe,{breadcrumbs:fe,children:[e.jsx(z,{title:"Tambah Kelas Baru"}),e.jsxs("div",{className:"px-4 py-4 md:px-6",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tambah Kelas Baru"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl text-sm",children:'Silakan isi form di bawah ini untuk membuat kelas baru. Setelah selesai, klik tombol "Simpan Draft" untuk menyimpan kelas sebagai draft.'}),e.jsxs("div",{className:"grid grid-cols-1 items-start gap-6 lg:grid-cols-2",children:[e.jsx($,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(U),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-6 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:16}),e.jsx("h3",{className:"font-medium",children:"Detail Informasi Kelas"})]}),e.jsx(d,{control:l.control,name:"title",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Judul Kelas"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Masukkan judul kelas",...a,autoComplete:"off"})}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"category_id",render:({field:a})=>{var s;return e.jsxs(n,{className:"flex flex-col",children:[e.jsx(i,{children:"Kategori"}),e.jsxs(q,{open:M,onOpenChange:v,children:[e.jsx(H,{asChild:!0,children:e.jsx(u,{children:e.jsxs(S,{variant:"outline",role:"combobox",className:F("justify-between",!a.value&&"text-muted-foreground"),children:[a.value?(s=b.find(o=>o.id===a.value))==null?void 0:s.name:"Pilih kategori",e.jsx("span",{className:"sr-only",children:"Pilih kategori"}),e.jsx(je,{className:"opacity-50"})]})})}),e.jsx(W,{className:"p-0",children:e.jsxs(Q,{children:[e.jsx(X,{placeholder:"Cari kategori...",className:"h-9"}),e.jsxs(Y,{children:[e.jsx(Z,{children:"Tidak ada kategori ditemukan."}),e.jsx(ee,{children:b.map(o=>e.jsxs(ae,{value:o.name,onSelect:()=>{l.setValue("category_id",o.id),v(!1)},children:[o.name,e.jsx(ge,{className:F("ml-auto",o.id===a.value?"opacity-100":"opacity-0")})]},o.id))})]})]})})]}),e.jsx(p,{})]})}}),e.jsx(d,{control:l.control,name:"tools",render:()=>e.jsxs(n,{children:[e.jsx(i,{children:"Tools yang Digunakan"}),e.jsx("div",{className:"text-muted-foreground mb-2 text-sm",children:"Pilih tools yang digunakan pada bootcamp ini."}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:E.map(a=>e.jsx(d,{control:l.control,name:"tools",render:({field:s})=>{var o;return e.jsxs(n,{className:"flex flex-row items-center gap-2 space-y-0",children:[e.jsx(u,{children:e.jsx(J,{checked:(o=s.value)==null?void 0:o.includes(a.id),onCheckedChange:t=>{var r;t?s.onChange([...s.value??[],a.id]):s.onChange((r=s.value)==null?void 0:r.filter(m=>m!==a.id))}})}),e.jsx(i,{className:"text-sm font-normal",children:a.name})]})}},a.id))}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"short_description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Deskripsi Singkat"}),e.jsx(u,{children:e.jsx(j,{placeholder:"Masukkan deskripsi singkat",...a,value:a.value??"",autoComplete:"off"})}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"description",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Deskripsi Lengkap"}),e.jsx(re,{...a,value:a.value??"",className:"w-full rounded border p-2",placeholder:"Masukkan deskripsi lengkap",autoComplete:"off"}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"key_points",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Syarat Peserta"}),e.jsx(he,{apiKey:"7apjqdre3ocnt08y5t5zlqyaytlom537pj6qbe0hlxhborco",value:a.value??"",onEditorChange:s=>a.onChange(s),init:{plugins:["anchor","autolink","charmap","codesample","emoticons","image","link","lists","media","searchreplace","table","visualblocks","wordcount"],onboarding:!1,toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",tinycomments_mode:"embedded",tinycomments_author:"Author name",mergetags_list:[{value:"First.Name",title:"First Name"},{value:"Email",title:"Email"}],height:300}}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"thumbnail",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Thumbnail (File Upload)"}),e.jsx("img",{src:_||"/assets/images/placeholder.png",alt:"Preview Thumbnail",className:"my-1 mt-2 h-40 w-64 rounded border object-cover"}),e.jsx(j,{type:"file",name:a.name,accept:"image/*",className:K?"border-red-500 focus-visible:ring-red-500":"",onChange:s=>{var t;const o=((t=s.target.files)==null?void 0:t[0])??null;if(o&&o.size>2*1024*1024){N(!0),T("Ukuran file maksimal 2MB!");return}if(N(!1),a.onChange(o),o){const r=new FileReader;r.onload=m=>{var c;return y((c=m.target)==null?void 0:c.result)},r.readAsDataURL(o)}else y(null)}}),e.jsx(w,{className:"ms-1",children:"Upload Icon. Format: PNG atau JPG Max 2 Mb"}),e.jsx(p,{})]})}),e.jsxs(n,{children:[e.jsx(i,{children:"Sneak Peek Kelas (Maksimal 4 gambar)"}),C.length>0&&e.jsx("div",{className:"mb-2 flex flex-wrap gap-2",children:C.map((a,s)=>e.jsx("img",{src:a,alt:`Sneak Peek ${s+1}`,className:"h-24 w-24 rounded border object-cover"},s))}),e.jsx(j,{type:"file",accept:"image/*",multiple:!0,onChange:G,max:4,className:A?"border-red-500 focus-visible:ring-red-500":""}),e.jsx(w,{className:"ms-1",children:"Upload hingga 4 gambar. Format: PNG/JPG, max 2MB per gambar."})]}),e.jsx(d,{control:l.control,name:"price",render:({field:a})=>e.jsxs(n,{children:[e.jsx(i,{children:"Harga"}),e.jsx(j,{...a,type:"text",placeholder:"Masukkan harga kursus",value:te.format(a.value||0),onChange:s=>a.onChange(ne(s.target.value)),autoComplete:"off"}),e.jsx(p,{})]})}),e.jsx(d,{control:l.control,name:"level",render:({field:a})=>e.jsxs(n,{className:"space-y-3",children:[e.jsx(i,{children:"Tingkat Kesulitan"}),e.jsx(u,{children:e.jsxs(se,{onValueChange:a.onChange,defaultValue:a.value,className:"flex flex-col",children:[e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(k,{value:"beginner"})}),e.jsx(i,{className:"font-normal",children:"Beginner"})]}),e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(k,{value:"intermediate"})}),e.jsx(i,{className:"font-normal",children:"Intermediate"})]}),e.jsxs(n,{className:"flex items-center gap-3",children:[e.jsx(u,{children:e.jsx(k,{value:"advanced"})}),e.jsx(i,{className:"font-normal",children:"Advanced"})]})]})}),e.jsx(p,{})]})})]}),e.jsx(S,{type:"submit",className:"w-full hover:cursor-pointer",children:"Simpan Draft"})]})}),e.jsx(xe,{modules:g,setModules:R,lessons:[],setLessons:()=>{}})]})]})]})}export{Sa as default};
