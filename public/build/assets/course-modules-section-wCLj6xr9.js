import{r as p,j as s}from"./app-ehuvTaMD.js";import{B as L}from"./badge-C_yeA9Y2.js";import{B as m}from"./button-CnWCZhaS.js";import{D as N,a as O}from"./dialog-CUk4OioK.js";import{S as _}from"./separator-DzBmwpmt.js";import{T as a,a as o,b as c}from"./tooltip-ChlZffu4.js";import w from"./create-lesson-D2wc-5B0.js";import D from"./create-module-pjdj-f7z.js";import P from"./edit-lesson-BYSlouMp.js";import q from"./edit-module-D7qBXdLp.js";import{c as M}from"./createLucideIcon-Dwz8hL6d.js";import{P as R}from"./plus-CVMLYMea.js";import{S as C}from"./square-pen-CJFvUoWc.js";import{T as k}from"./trash-D7b6qIbq.js";import{B as G}from"./badge-check-B74tp254.js";import{L as K}from"./lock-cF5Jhs21.js";import"./index-RAtLVda3.js";import"./utils-9G-TgTw2.js";import"./index-D4fESLtC.js";import"./index-CpxHlOzM.js";import"./Combination-CM1ERkG0.js";import"./index-BkyRFM7S.js";import"./index-DHDduoin.js";import"./floating-ui.react-dom-CMsEK_Tl.js";import"./index-DyLQgsT1.js";import"./index-Bny227ZW.js";import"./input-error-CX8M9ogb.js";import"./input-CuISp_4v.js";import"./label-jDXTnFJn.js";import"./select-eOh5J903.js";import"./index-Dh3ObG17.js";import"./index-BKDR33wU.js";import"./chevron-down-DIUNEqXK.js";import"./check-Vx_kM3Sv.js";import"./chevron-up-DMQBkeRC.js";import"./Editor-Cm_uS7aO.js";import"./textarea-DAo4xcY7.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"m20 13.7-2.1-2.1a2 2 0 0 0-2.8 0L9.7 17",key:"q6ojf0"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"10",cy:"8",r:"2",key:"2qkj4p"}]],$=M("BookImage",U);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],J=M("CirclePlus",F);function Ss({modules:l,setModules:h}){const[E,v]=p.useState(!1),[z,x]=p.useState(!1),[j,g]=p.useState(null),[T,u]=p.useState(null),[n,f]=p.useState(null),b=i=>{h([...l,i]),v(!1)},I=i=>{if(j!==null){const r=[...l];r[j]={...r[j],...i},h(r)}x(!1),g(null)},B=i=>{h(l.filter((r,e)=>e!==i))},S=(i,r)=>{const e=[...l];e[i].lessons||(e[i].lessons=[]),e[i].lessons.push(r),h(e),u(null)},A=(i,r,e)=>{console.log("Editing lesson - Before:",e.title,"ID:",e.id);const t=[...l];if(t[i].lessons){const d=t[i].lessons[r],y={...e,id:e.id||d.id};console.log("Editing lesson - After:",y.title,"ID:",y.id),t[i].lessons[r]=y,h(t)}f(null)},H=(i,r)=>{const e=[...l];e[i].lessons&&(e[i].lessons.splice(r,1),h(e))};return s.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($,{size:16}),s.jsx("h3",{className:"font-medium",children:"Materi Kelas"})]}),s.jsxs(N,{open:E,onOpenChange:v,children:[s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsx(O,{asChild:!0,children:s.jsxs(m,{variant:"outline",className:"size-8 hover:cursor-pointer",children:[s.jsx(R,{}),s.jsx("span",{className:"sr-only",children:"Tambah Modul"})]})})}),s.jsx(c,{children:s.jsx("p",{children:"Tambah Modul"})})]}),s.jsx(D,{setOpen:v,onAdd:b})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsx("ul",{className:"space-y-2",children:l&&l.length>0?l.map((i,r)=>s.jsxs("li",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:i.title}),s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs(N,{open:z&&j===r,onOpenChange:e=>{x(e),e||g(null)},children:[s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsxs(m,{variant:"link",size:"icon",className:"size-8 hover:cursor-pointer",onClick:()=>{g(r),x(!0)},children:[s.jsx(C,{}),s.jsx("span",{className:"sr-only",children:"Edit Modul"})]})}),s.jsx(c,{children:s.jsx("p",{children:"Edit Modul"})})]}),s.jsx(q,{setOpen:x,onEdit:I,module:i})]}),s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsxs(m,{variant:"link",size:"icon",className:"size-8 text-red-500 hover:cursor-pointer",onClick:()=>B(r),children:[s.jsx(k,{}),s.jsx("span",{className:"sr-only",children:"Hapus Modul"})]})}),s.jsx(c,{children:s.jsx("p",{children:"Hapus Modul"})})]})]})]}),i.description&&s.jsx("div",{className:"text-muted-foreground text-xs",children:i.description}),i.lessons&&i.lessons.length>0&&s.jsx("div",{className:"mt-2 space-y-2",children:i.lessons.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[e.is_free?s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsx(G,{size:"14",className:"hover:text-green-500"})}),s.jsx(c,{children:s.jsx("p",{children:"Materi Gratis"})})]}):s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsx(K,{size:"14",className:"hover:text-red-500"})}),s.jsx(c,{children:s.jsx("p",{children:"Materi Berbayar"})})]}),s.jsx("h4",{className:"text-sm",children:e.title})]}),s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(L,{className:"mr-2",children:e.type.charAt(0).toUpperCase()+e.type.slice(1)}),s.jsxs(N,{open:(n==null?void 0:n.modIdx)===r&&(n==null?void 0:n.lessonIdx)===t,onOpenChange:d=>{d||f(null)},children:[s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsxs(m,{variant:"link",size:"icon",className:"size-8 hover:cursor-pointer",onClick:()=>f({modIdx:r,lessonIdx:t}),children:[s.jsx(C,{}),s.jsx("span",{className:"sr-only",children:"Edit Materi"})]})}),s.jsx(c,{children:s.jsx("p",{children:"Edit Materi"})})]}),(n==null?void 0:n.modIdx)===r&&(n==null?void 0:n.lessonIdx)===t&&s.jsx(P,{setOpen:d=>{d||f(null)},onEdit:d=>A(r,t,d),lesson:e})]}),s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsxs(m,{variant:"link",size:"icon",className:"size-8 text-red-500 hover:cursor-pointer",onClick:()=>H(r,t),children:[s.jsx(k,{}),s.jsx("span",{className:"sr-only",children:"Hapus Materi"})]})}),s.jsx(c,{children:s.jsx("p",{children:"Hapus Materi"})})]})]})]},t))}),s.jsxs(N,{open:T===r,onOpenChange:e=>u(e?r:null),children:[s.jsxs(a,{children:[s.jsx(o,{asChild:!0,children:s.jsxs(m,{size:"sm",variant:"outline",className:"mt-2 text-xs hover:cursor-pointer",onClick:()=>u(r),children:["Tambah Materi ",s.jsx(J,{})]})}),s.jsx(c,{children:s.jsx("p",{children:"Tambah Materi"})})]}),s.jsx(w,{setOpen:e=>u(e?r:null),onAdd:e=>S(r,e)})]}),s.jsx(_,{className:"my-4"})]},r)):s.jsx("li",{className:"text-muted-foreground text-sm",children:"Belum ada modul. Tambahkan modul baru."})})})]})}export{Ss as default};
