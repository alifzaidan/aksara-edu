import{r as o,m as j,j as e}from"./app-ehuvTaMD.js";import{I as b}from"./input-error-CX8M9ogb.js";import{B as d}from"./button-CnWCZhaS.js";import{D as w,a as v,b as k,g as D,c as _,d as y,e as L}from"./dialog-CUk4OioK.js";import{I as E}from"./input-CuISp_4v.js";import{L as u}from"./label-jDXTnFJn.js";import{P as I}from"./plus-CVMLYMea.js";import"./utils-9G-TgTw2.js";import"./index-RAtLVda3.js";import"./index-D4fESLtC.js";import"./createLucideIcon-Dwz8hL6d.js";import"./index-CpxHlOzM.js";import"./Combination-CM1ERkG0.js";function N(t){const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=t.match(s);return a&&a[2].length===11?a[2]:""}function V({webinarId:t,currentRecordingUrl:s}){const[a,l]=o.useState(!1),{data:i,setData:m,patch:p,processing:g,errors:x,reset:h}=j({recording_url:s||""}),[n,c]=o.useState("");o.useEffect(()=>{if(i.recording_url){const r=N(i.recording_url);c(r?`https://www.youtube.com/embed/${r}`:"")}else c("")},[i.recording_url]);const f=r=>{r.preventDefault(),p(route("webinars.add-recording",{webinar:t}),{onSuccess:()=>{h(),l(!1)}})};return e.jsxs(w,{open:a,onOpenChange:l,children:[e.jsx(v,{asChild:!0,children:e.jsxs(d,{className:"w-full",children:[e.jsx(I,{}),s?"Edit Link Rekaman":"Tambah Link Rekaman"]})}),e.jsxs(k,{className:"sm:max-w-[425px]",children:[e.jsxs(D,{children:[e.jsx(_,{children:"Link Rekaman Webinar"}),e.jsx(y,{children:"Masukkan link video dari YouTube. Pastikan link valid agar peserta dapat melihat rekaman."})]}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"recording_url",children:"Link YouTube"}),e.jsx(E,{id:"recording_url",value:i.recording_url,onChange:r=>m("recording_url",r.target.value),placeholder:"https://www.youtube.com/watch?v=xxxxxx"}),e.jsx(b,{message:x.recording_url})]}),n&&e.jsxs("div",{children:[e.jsx(u,{children:"Pratinjau Video"}),e.jsx("div",{className:"mt-2 aspect-video w-full",children:e.jsx("iframe",{className:"h-full w-full rounded-lg border",src:n,title:"YouTube Preview",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),e.jsx(L,{children:e.jsx(d,{type:"submit",disabled:g,children:"Simpan Link"})})]})]})]})}export{V as default};
