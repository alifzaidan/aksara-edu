import{r as n,m as S,j as e}from"./app-Dgckegnv.js";import{I as i}from"./input-error-B6Y05Att.js";import{B as j}from"./button-BoodZbDI.js";import{b as T,c as w,d as R,e as L,f as k}from"./dialog-BFjFmxZ0.js";import{I as u}from"./input-BD0fYVX6.js";import{L as c}from"./label-DosG7VBI.js";import{T as B}from"./textarea-CesHpuzB.js";import"./utils-DN5XrRsW.js";import"./index-DqG1Ybe7.js";import"./index-Bnki4qJp.js";import"./createLucideIcon-DZLt22s0.js";import"./index-DceXYycZ.js";import"./Combination-CkIyJKU1.js";function W({tool:s,setOpen:p}){const d=n.useRef(null),v=n.useRef(null),N=n.useRef(null),[y,g]=n.useState(s.icon?`/storage/${s.icon}`:null),{data:t,setData:r,post:C,processing:D,reset:b,errors:l,clearErrors:m}=S({name:s.name,slug:s.slug,description:s.description,icon:null});n.useEffect(()=>{r({name:s.name,slug:s.slug,description:s.description,icon:null}),m()},[s,r,m]);const I=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),E=a=>{a.preventDefault(),C(route("tools.update",s.id),{method:"put",...t,preserveScroll:!0,forceFormData:!0,onSuccess:()=>{p(!1),b(),m()},onError:()=>{var o;return(o=d.current)==null?void 0:o.focus()}})};return e.jsxs(T,{children:[e.jsx(w,{children:"Edit Tool"}),e.jsx(R,{children:"Ubah nama atau slug tool."}),e.jsxs("form",{className:"space-y-6",onSubmit:E,children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"name",className:"sr-only",children:"Nama Tool"}),e.jsx(u,{id:"name",type:"text",name:"name",ref:d,value:t.name,onChange:a=>{r("name",a.target.value),r("slug",I(a.target.value))},placeholder:"Nama Kategori",autoComplete:"off"}),e.jsx(i,{message:l.name}),e.jsx(c,{htmlFor:"slug",className:"sr-only",children:"Slug"}),e.jsx(u,{id:"slug",type:"text",name:"slug",value:t.slug,onChange:a=>r("slug",a.target.value),placeholder:"Slug",autoComplete:"off",disabled:!0}),e.jsx(i,{message:l.slug}),e.jsx(c,{htmlFor:"description",className:"sr-only",children:"Deskripsi"}),e.jsx(B,{id:"description",name:"description",ref:v,value:t.description??"",onChange:a=>r("description",a.target.value),placeholder:"Deskripsi (opsional)",className:"resize-none"}),e.jsx(i,{message:l.description}),e.jsx(c,{htmlFor:"icon",className:"sr-only",children:"Icon"}),e.jsx("img",{src:y||"/assets/images/placeholder.png",alt:"Preview Icon",className:"my-1 mt-2 h-24 w-24 rounded border object-cover"}),e.jsx(u,{id:"icon",type:"file",name:"icon",ref:N,accept:"image/*",onChange:a=>{var h;const o=((h=a.target.files)==null?void 0:h[0])??null;if(r("icon",o),o){const f=new FileReader;f.onload=F=>{var x;return g((x=F.target)==null?void 0:x.result)},f.readAsDataURL(o)}else g(s.icon?`/storage/${s.icon}`:null)},placeholder:"Icon (opsional)"}),e.jsx(i,{message:l.icon})]}),e.jsxs(L,{className:"gap-2",children:[e.jsx(k,{asChild:!0,children:e.jsx(j,{variant:"secondary",onClick:()=>p(!1),className:"hover:cursor-pointer",children:"Batal"})}),e.jsx(j,{disabled:D,asChild:!0,className:"hover:cursor-pointer",children:e.jsx("button",{type:"submit",children:"Simpan Perubahan"})})]})]})]})}export{W as default};
